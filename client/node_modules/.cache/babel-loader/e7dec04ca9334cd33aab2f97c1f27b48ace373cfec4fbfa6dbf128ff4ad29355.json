{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u041F\\u0430\\u0432\\u0435\\u043B/Desktop/svit-altai/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useEffect,useState}from\"react\";import Cookies from\"universal-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cookies=new Cookies();function RegForm(_ref){var modal=_ref.modal,setModal=_ref.setModal;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var inputMail=useRef();var inputPhone=useRef();var inputPass=useRef();var inputValidPass=useRef();var inputName=useRef();function sendRegForm(){var mail=inputMail.current.value;var phone=inputPhone.current.value;var pass=inputPass.current.value;var validPass=inputValidPass.current.value;var name=inputName.current.value;if(mail.length>0&&pass.length>0&&validPass.length>0){if(pass==validPass){var regData={mail:mail,phone:phone!=null?phone:\"\",pass:pass,name:name};fetch(\"http://localhost:5000/registration\",{method:\"POST\",body:JSON.stringify(regData),headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.text();}).then(function(data){if(data!=\"Такой пользователь уже существует!\"){data=JSON.parse(data);console.log(data);cookies.set(\"id\",data.ID);cookies.set(\"pass\",data.password);setModal();}else{setError(data);}});}else{setError(\"Пароли не совпадают!\");}}else{setError(\"Заполнены не все поля!\");}}return/*#__PURE__*/_jsx(\"div\",{className:\"modal_form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reg\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"../images/auth/logo.svg\",className:\"reg__logo\"}),/*#__PURE__*/_jsx(\"span\",{className:\"reg__title\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"reg__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reg__input__list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reg__input__item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reg__input__title\",children:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reg__input\",ref:inputName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg__input__item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reg__input__title\",children:\"\\u041F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reg__input\",ref:inputMail})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg__input__item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reg__input__title\",children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430 (\\u0435\\u0441\\u043B\\u0438 \\u0435\\u0441\\u0442\\u044C)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reg__input\",ref:inputPhone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg__input__item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reg__input__title\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reg__input\",ref:inputPass,type:\"password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg__input__item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"reg__input__title\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reg__input\",ref:inputValidPass,type:\"password\"})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"modal__error\",children:typeof error==\"undefined\"?\"\":error}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg__form__buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"reg__form__btn reg__btn-orange\",type:\"button\",onClick:function onClick(){setModal(\"login\");},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reg__form__btn reg__btn-white\",type:\"button\",onClick:function onClick(){setModal();},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"reg__form__buttons reg__btn__center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"reg__form__btn\",onClick:function onClick(e){e.preventDefault();sendRegForm();},children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg__footer\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"reg__footer__content\",children:[\"\\xA9 2010-2018 \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0422\\u043E\\u0440\\u0433\\u043E\\u0432\\u0430\\u044F \\u043C\\u0430\\u0440\\u043A\\u0430 \\xAB\\u0421\\u0432\\u0438\\u0442\\xBB\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"reg__footer__content\",children:[\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u043E\\u0435 \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0441\\u043E\\u0433\\u043B\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\"]})]})]})});}export default RegForm;","map":{"version":3,"names":["useRef","useEffect","useState","Cookies","cookies","RegForm","modal","setModal","error","setError","inputMail","inputPhone","inputPass","inputValidPass","inputName","sendRegForm","mail","current","value","phone","pass","validPass","name","length","regData","fetch","method","body","JSON","stringify","headers","then","response","text","data","parse","console","log","set","ID","password","e","preventDefault"],"sources":["C:/Users/Павел/Desktop/svit-altai/client/src/components/RegForm.js"],"sourcesContent":["import { useRef, useEffect, useState } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nconst cookies = new Cookies();\r\n\r\nfunction RegForm({ modal, setModal }) {\r\n  const [error, setError] = useState(\"\");\r\n  const inputMail = useRef();\r\n  const inputPhone = useRef();\r\n  const inputPass = useRef();\r\n  const inputValidPass = useRef();\r\n  const inputName = useRef();\r\n\r\n  function sendRegForm() {\r\n    const mail = inputMail.current.value;\r\n    const phone = inputPhone.current.value;\r\n    const pass = inputPass.current.value;\r\n    const validPass = inputValidPass.current.value;\r\n    const name = inputName.current.value;\r\n\r\n    if (mail.length > 0 && pass.length > 0 && validPass.length > 0) {\r\n      if (pass == validPass) {\r\n        const regData = {\r\n          mail: mail,\r\n          phone: phone != null ? phone : \"\",\r\n          pass: pass,\r\n          name: name,\r\n        };\r\n        fetch(\"http://localhost:5000/registration\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(regData),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n          .then((response) => response.text())\r\n          .then((data) => {\r\n            if (data != \"Такой пользователь уже существует!\") {\r\n              data = JSON.parse(data);\r\n              console.log(data);\r\n              cookies.set(\"id\", data.ID);\r\n              cookies.set(\"pass\", data.password);\r\n              setModal();\r\n            } else {\r\n              setError(data);\r\n            }\r\n          });\r\n      } else {\r\n        setError(\"Пароли не совпадают!\");\r\n      }\r\n    } else {\r\n      setError(\"Заполнены не все поля!\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal_form\">\r\n      <div className=\"reg\">\r\n        <img src=\"../images/auth/logo.svg\" className=\"reg__logo\" />\r\n        <span className=\"reg__title\">Регистрация</span>\r\n        <form className=\"reg__form\">\r\n          <div className=\"reg__input__list\">\r\n            <div className=\"reg__input__item\">\r\n              <span className=\"reg__input__title\">Имя пользователя</span>\r\n              <input className=\"reg__input\" ref={inputName} />\r\n            </div>\r\n            <div className=\"reg__input__item\">\r\n              <span className=\"reg__input__title\">Почта</span>\r\n              <input className=\"reg__input\" ref={inputMail} />\r\n            </div>\r\n            <div className=\"reg__input__item\">\r\n              <span className=\"reg__input__title\">\r\n                Номер телефона (если есть)\r\n              </span>\r\n              <input className=\"reg__input\" ref={inputPhone} />\r\n            </div>\r\n            <div className=\"reg__input__item\">\r\n              <span className=\"reg__input__title\">Пароль</span>\r\n              <input className=\"reg__input\" ref={inputPass} type=\"password\" />\r\n            </div>\r\n            <div className=\"reg__input__item\">\r\n              <span className=\"reg__input__title\">Подтвердите пароль</span>\r\n              <input\r\n                className=\"reg__input\"\r\n                ref={inputValidPass}\r\n                type=\"password\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <span className=\"modal__error\">\r\n            {typeof error == \"undefined\" ? \"\" : error}\r\n          </span>\r\n          <div className=\"reg__form__buttons\">\r\n            <button\r\n              className=\"reg__form__btn reg__btn-orange\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setModal(\"login\");\r\n              }}\r\n            >\r\n              Войти\r\n            </button>\r\n            <button\r\n              className=\"reg__form__btn reg__btn-white\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setModal();\r\n              }}\r\n            >\r\n              Назад\r\n            </button>\r\n          </div>\r\n          <div className=\"reg__form__buttons reg__btn__center\">\r\n            <button\r\n              className=\"reg__form__btn\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                sendRegForm();\r\n              }}\r\n            >\r\n              Регистрация\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div className=\"reg__footer\">\r\n          <span className=\"reg__footer__content\">\r\n            © 2010-2018 <br />\r\n            Торговая марка «Свит»\r\n          </span>\r\n          <span className=\"reg__footer__content\">\r\n            Пользовательское <br />\r\n            соглашение\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}